<!doctype html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <title>CBME × EPA 核心能力雷達圖</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Tailwind：只是為了好看一點的排版 -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Chart.js：用來畫雷達圖 -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body class="bg-slate-50">
    <div class="min-h-screen p-4 md:p-8 text-slate-800">
      <div class="max-w-6xl mx-auto mb-6 bg-white p-6 rounded-xl shadow-sm border border-slate-200">
        <h1 class="text-2xl md:text-3xl font-bold text-slate-900 mb-2">
          CBME 概念導航：11項公版 EPA × SIRIPPP 核心能力雷達圖
        </h1>
        <p class="text-sm text-slate-600">
          勾選右側任務，可<strong>疊加顯示</strong>不同 EPA 對七大核心能力（SIRIPPP）的需求強度，用於教學說明與比較。
        </p>
      </div>

      <div class="max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-12 gap-6">
        <!-- 左側：雷達圖 -->
        <div
          class="lg:col-span-8 bg-white p-4 rounded-xl shadow-lg border border-slate-200 flex flex-col"
        >
          <div class="flex justify-between items-center mb-2">
            <h2 class="font-bold text-slate-700">能力雷達視圖（Radar Chart）</h2>
            <span id="selected-count" class="text-xs text-slate-400"></span>
          </div>
          <div class="w-full h-[420px] md:h-[500px]">
            <canvas id="epaRadarChart"></canvas>
          </div>
        </div>

        <!-- 右側：EPA 清單 + 說明 -->
        <div class="lg:col-span-4 flex flex-col gap-4">
          <!-- EPA 選單 -->
          <div
            class="bg-white p-4 rounded-xl shadow-md border border-slate-200 max-h-[520px] overflow-y-auto"
          >
            <h3 class="font-bold text-slate-800 mb-3 text-sm">
              EPA 任務清單（可複選）
            </h3>
            <div id="epa-list" class="space-y-2 text-sm"></div>
          </div>

          <!-- SIRIPPP 說明 -->
          <div class="bg-slate-800 text-white p-4 rounded-xl shadow-md text-xs">
            <div class="font-bold text-slate-300 mb-2">
              SIRIPPP 七大核心能力（地圖上的主幹道）
            </div>
            <ul id="sirippp-list" class="space-y-1"></ul>
          </div>
        </div>
      </div>
    </div>

    <script>
      // 七大核心能力 (SIRIPPP) — 新定義
      const competencies = [
        {
          subject: "S: System-based Practice (體制下的臨床工作)",
          full: "System-based Practice",
        },
        {
          subject:
            "I: Interpersonal & Communication (人際關係與溝通技巧)",
          full: "Interpersonal & Communication",
        },
        {
          subject:
            "R: Respiratory Care Knowledge (呼吸照護知識)",
          full: "Respiratory Care Knowledge",
        },
        {
          subject:
            "I: Interprofessional Practice (跨領域團隊合作照護)",
          full: "Interprofessional Practice",
        },
        {
          subject: "P: Patient Care (病人照護)",
          full: "Patient Care",
        },
        {
          subject: "P: Professionalism (專業素養)",
          full: "Professionalism",
        },
        {
          subject:
            "P: Practice-based Learning and Improvement (從工作中學習與成長)",
          full: "Practice-based Learning and Improvement",
        },
      ];

      // 11 項 EPA 任務（已依新 SIRIPPP 重新分配）
      const epaSc
